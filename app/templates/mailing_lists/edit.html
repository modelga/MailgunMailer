{% extends "layout/layout.html" %}
{% block content %}
    <article class="content item-editor-page">
        <div class="title-block">
            <div class="col-sm-6"><h3 class="title"> Mailing List </h3></div>
            <div class="pull-right delete_mailing_list">
                <button class="btn btn-danger btn-sm rounded" id="delete_mailing_list">Delete</button>
                </a>
            </div>
        </div>
        <div class="col-sm-8">
            <div class="card card-primary">
                <div class="card-header">
                    <div class="header-block">
                        <h4 class="title">Name : {{ mg_data['name'] }}</h4>
                    </div>
                </div>
                <div class="card-block">
                    <div class="form-group">
                        <label>Name:</label>
                        <input input type="text" class="form-control border-input" disabled
                               value="{{ mg_data['name'] }}">
                    </div>
                    <div class="form-group">
                        <label>Address:</label>
                        <input input type="text" class="form-control border-input" disabled
                               value="{{ mg_data['address'] }}">
                    </div>
                    <div class="form-group">
                        <label>Description:</label>
                        <input input type="text" class="form-control border-input" disabled
                               value="{{ mg_data['description'] }}">
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label>Members Count:</label>
                                <input input type="text" class="form-control border-input" disabled
                                       value="{{ mg_data['members_count'] }}"></div>
                            <div class="col-sm-6">
                                <label>Edit Members in this Group:</label>
                                <br/> <a
                                    href="{{ url_for('mailing_lists_edit_members', mailing_list_id=mg_data['address']) }}"
                                    class="btn btn-block btn-warning rounded">Edit Members</a>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Created at:</label>
                        <input input type="text" class="form-control border-input" disabled
                               value="{{ mg_data['created_at'] }}">
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="card card-primary">
                <div class="card-header">
                    <div class="header-block">
                        <h4 class="title">Create Mapping URL</h4>
                    </div>
                </div>
                <div class="card-block">
                    <a href="{{ url_for('mailing_lists_edit_mapper', mailing_list_id=mg_data['address']) }}"
                                    class="btn btn-block btn-info rounded">Create Form and URL</a>
                </div>
        </div>

        <script>
            $(document).ready(function () {
                $('#delete_mailing_list').click(function () {
                    var btn_tag = '<button class="btn btn-danger btn-sm rounded" id="delete_mailing_list_sure">YES Delete</button>';
                    $(".delete_mailing_list").empty().append("<b>Are you sure? This action cannot be undone! </b>" + btn_tag);
                    $('#delete_mailing_list_sure').click(function () {
                        window.location.href = "{{ url_for('mailing_lists_delete', mailing_list_id=mg_data['address']) }}";
                    });
                });
            });
        </script>

    </article>

{% endblock %}